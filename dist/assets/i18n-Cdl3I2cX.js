const t="selectedLanguage",e=new Set(["en","ar","pl","tr"]),n="en";const a=new class{constructor(){this.translations={},this.baseTexts={},this.currentLang=this.getStoredLanguage(),this.defaultTitle=document.title,this.defaultSlogan=this.getDefaultSlogan()}getStoredLanguage(){const a=localStorage.getItem(t);return e.has(a)?a:n}getDefaultSlogan(){const t=document.getElementById("motto");return t?t.textContent:""}async loadTranslations(t){if(t===n)return this.translations={},void this.updatePage();const e=Date.now(),a=this.getTranslationPaths(t,e);for(const n of a)try{const t=await fetch(n,{cache:"no-store",headers:{"Cache-Control":"no-cache",Pragma:"no-cache",Expires:"0",Accept:"application/json"}});if(t.ok)return this.translations=await t.json(),void this.updatePage()}catch(s){}this.translations={},this.updatePage()}getTranslationPaths(t,e){const n=[`lang/${t}.json?v=${e}`,`/lang/${t}.json?v=${e}`];return window.location.pathname.includes("/services/")&&n.unshift(`../lang/${t}.json?v=${e}`),n.push(new URL(`lang/${t}.json`,location.href).href+`?v=${e}`),n}updatePage(){const t=this.currentLang===n;document.querySelectorAll("[data-key]").forEach(e=>{const n=e.getAttribute("data-key");n in this.baseTexts||(this.baseTexts[n]="A"===e.tagName?e.textContent:e.innerHTML);const a=this.translations[n],s=this.baseTexts[n],o=t?s:void 0!==a?a:s;void 0!==o&&("A"===e.tagName?e.textContent=String(o).split(":")[0].trim():e.innerHTML=o)}),t?document.title=this.defaultTitle:this.translations.title&&(document.title=this.translations.title);const e=document.getElementById("motto");e&&(e.textContent=t?this.defaultSlogan:this.translations.slogan||this.defaultSlogan),this.updateDirection(),document.documentElement.setAttribute("lang",this.currentLang)}updateDirection(){const t=document.documentElement;"ar"===this.currentLang?t.setAttribute("dir","rtl"):t.setAttribute("dir","ltr")}async changeLanguage(n){if(!e.has(n))return;this.currentLang=n,localStorage.setItem(t,n),await this.loadTranslations(n),this.updateLanguageToggle(n);const a=document.getElementById("language-menu");a&&(a.style.display="none"),window.dispatchEvent(new CustomEvent("languagechange",{detail:{lang:n}}))}updateLanguageToggle(t){const e=document.getElementById("language-toggle");if(!e)return;const n=this.getFlagUrl(t),a=this.getLanguageName(t);e.innerHTML=`<img src="${n}" alt="${t}" class="language-toggle__flag"> ${a}`}getFlagUrl(t){const e={en:"https://flagcdn.com/w20/gb.png",ar:"https://flagcdn.com/w20/eg.png",pl:"https://flagcdn.com/w20/pl.png",tr:"https://flagcdn.com/w20/tr.png"};return e[t]||e[n]}getLanguageName(t){return{en:"English",ar:"العربية",pl:"Polski",tr:"Türkçe"}[t]||"English"}async init(){await this.loadTranslations(this.currentLang),this.updateLanguageToggle(this.currentLang)}};window.changeLanguage=t=>a.changeLanguage(t),window.toggleLanguageMenu=()=>{const t=document.getElementById("language-menu"),e=document.getElementById("language-toggle");if(!t||!e)return;const n="block"===t.style.display;t.style.display=n?"none":"block",e.setAttribute("aria-expanded",String(!n))};export{a as i};
